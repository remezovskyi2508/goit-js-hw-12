{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export default function imgList(photos) {\n  const markup = photos\n    .map(photo => {\n      return `<li class=\"photo-item\">\n        <a href=\"${photo.largeImageURL}\"><img class=\"img-item\" src=\"${photo.webformatURL}\" alt=\"${photo.tags}\"/></a> \n        <div class=\"descr-wrapper\">\n        <p class=\"descr\"><span class='label-img'>Likes</span> ${photo.likes}</p>\n        <p class=\"descr\"><span class='label-img'>Views</span> ${photo.views}</p>\n        <p class=\"descr\"><span class='label-img'>Comments</span> ${photo.comments}</p>\n        <p class=\"descr\"><span class='label-img'>Downloads</span> ${photo.downloads}</p>\n        </div>\n      </li>`;\n    })\n    .join('');\n  return markup;\n}\n","import axios from 'axios';\n\nconst fetchImages = async (input, page = 1) => {\n  let perPage = 15;\n\n  const searchParams = new URLSearchParams({\n    key: '45320962-957458a2920d861910609dde6',\n    q: `${input}`,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: perPage,\n    page: page,\n  });\n  const response = await axios.get(`https://pixabay.com/api/?${searchParams}`);\n  return response.data;\n};\n\nexport default fetchImages;\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport imgList from './js/render-functions.js';\nimport fetchImages from './js/pixabay-api.js';\n\nconst form = document.querySelector('#searchForm');\nconst input = document.querySelector('#searchImg');\nconst listImages = document.querySelector('.list-images');\nconst loader = document.querySelector('.loader');\nconst moreBtn = document.querySelector('#moreBtn');\n\nconst gallery = new SimpleLightbox('.list-images a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nlet page = 1;\nlet totalLoadedImages = 0;\nlet currentQuery = '';\nlet totalHits = 0;\n\nform.addEventListener('submit', e => {\n  e.preventDefault();\n  listImages.innerHTML = '';\n  loader.style.display = 'block';\n  currentQuery = input.value.trim();\n  page = 1;\n\n  fetchImages(currentQuery)\n    .then(photos => {\n      totalHits = photos.totalHits;\n      const totalPages = Math.ceil(totalHits / 15);\n\n      if (photos.hits.length === 0) {\n        iziToast.error({\n          timeout: 2500,\n          position: 'topRight',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n        loader.style.display = 'none';\n        moreBtn.style.display = 'none';\n        return;\n      }\n      const markup = imgList(photos.hits);\n      listImages.innerHTML = markup;\n      totalLoadedImages = photos.hits.length;\n      moreBtn.style.display = page < totalPages ? 'flex' : 'none';\n      loader.style.display = 'none';\n      gallery.refresh();\n    })\n    .catch(error => {\n      iziToast.error({\n        timeout: 2500,\n        position: 'topRight',\n        message: `Error: ${error.message || 'Something went wrong'}`,\n      });\n      loader.style.display = 'none';\n      moreBtn.style.display = 'none';\n    });\n  input.value = '';\n});\n\nmoreBtn.addEventListener('click', () => {\n  page += 1;\n  loader.style.display = 'block';\n  moreBtn.style.display = 'none';\n\n  fetchImages(currentQuery, page)\n    .then(photos => {\n      totalLoadedImages += photos.hits.length;\n      const totalPages = Math.ceil(totalHits / 15);\n      \n      const markup = imgList(photos.hits);\n      listImages.insertAdjacentHTML('beforeend', markup);\n      gallery.refresh();\n      loader.style.display = 'none';\n\n      if (page >= totalPages || totalLoadedImages >= totalHits) {\n        iziToast.error({\n          position: 'topRight',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n        moreBtn.style.display = 'none';\n      } else {\n        moreBtn.style.display = 'flex';\n      }\n      \n      const imgItem = document.querySelector('.photo-item');\n      const cardHeight = imgItem.getBoundingClientRect().height;\n\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    })\n    .catch(error => {\n      iziToast.error({\n        timeout: 2500,\n        position: 'topRight',\n        message: `Error: ${error.message || 'Something went wrong'}`,\n      });\n      loader.style.display = 'none';\n      moreBtn.style.display = 'flex';\n    });\n});\n"],"names":["imgList","photos","photo","fetchImages","input","page","perPage","searchParams","axios","form","listImages","loader","moreBtn","gallery","SimpleLightbox","totalLoadedImages","currentQuery","totalHits","e","totalPages","iziToast","markup","error","cardHeight"],"mappings":"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"}